var Conn = require('./conn');

function Request(method, params, id, conn){

    this.method = method;
    this.params = params;
    this.id = id;
    this.conn = new Conn(conn);
}
Request.prototype = {

    next: function(err){
        var data = {

            error: {
                message: err.message || "Server Error",
                code: 400
            },

            id: this.id || null
        }

        this.conn.write( JSON.stringify(data) );
    },

    getParams: function(){
        return this.params;
    },

    send: function(result){

        var response = {
            id: this.id || null,
            result: result
        }

        this.conn.write(response);
    }

}

module.exports = Request;