var T = require("./twitterSteram").T;
var tweets  = [];

function Stream(options){
    this.clients = [];
    this.tweets = [];
    this.outStreams = options.outStream;
    this.io = require('socket.io').listen(options.server);

    this.init();
}

Stream.prototype = {
    init: function(){
        this.outStreams.on('tweet', this.getTweet);
        this.io.sockets.on("connection", this.connection);
    },

    connection: function(socket){
        console.log(socket);
        this.clients.push(socket);
    },

    getTweet: function(tweet){
        this.tweets.push(tweet);
    }
}

module.exports = function(server){

    new Stream({
        server: server,
        outStreamFacrotory: T
    });

}