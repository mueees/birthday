var _ = require('underscore');
var $ = require('jquery');

var settings = {
	lang: ['ru', 'en'],
	spam: ['купить javascript без смс', 'скачать аддоны', 'Racing for Android', 'за деньги секс', 'план урока'
	],
	maxCountHashTag: 4
}

var Filters = module.exports = {};

//Пропускаем твиты содержащие переизбыток хештегов
Filters.manyHashTag = function(tweet){
	if( tweet.entities.hashtags.length > settings.maxCountHashTag ){
		return false;
	}else{
		return true;
	}
}

//игнорировать заданные слова в сообщении
Filters.spam = function(tweet){
	var text = tweet.text;
	var result = true;

	for(var i = 0; i < settings.spam.length; i++ ){
		if( text.indexOf(settings.spam[i]) != -1 ){
			result = false;
			break;
		}
	}

	return result;
}

//игнорировать ретвиты и ответы
Filters.retwitAnswer = function(tweet){
	var text = tweet.text;
	if( text.indexOf('RT ') == 0 || text.indexOf('@') == 0 || text.indexOf('.@') == 0 ){
		return false;
	}{
		return true;
	}
}

//сообщения от пользователей с стандартными аватарами;
/*Filters.defaultImage = function(tweet){
	if( tweet.user.profile_image_url.indexOf('default_profile_images') > -1 ){
		return true;
	}{
		return false;
	}
}*/

//сообщения не содержащие ссылки
Filters.onlyWithUrl = function(tweet){
    if( !tweet.entities.urls || tweet.entities.urls.length == 0 ){
        return false;
    }else{
        return true;
    }
}


//сообщения только на русском и английском языке
Filters.lang = function(tweet){
	if( $.inArray(tweet.lang, settings.lang) == -1){
		return false;
	}{
		return true;
	}
}